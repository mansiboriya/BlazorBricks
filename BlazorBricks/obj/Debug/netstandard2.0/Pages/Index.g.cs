#pragma checksum "/Users/mansiboriya/Downloads/BlazorBricks/BlazorBricks/Pages/Index.cshtml" "{ff1816ec-aa5e-4d10-87f7-6f4963833460}" "2561c2949190ff9508a35610e120e4fc11babc58"
// <auto-generated/>
#pragma warning disable 1591
namespace BlazorBricks.Pages
{
    #line hidden
    using System;
    using System.Collections.Generic;
    using System.Linq;
    using System.Threading.Tasks;
    using System.Net.Http;
    using Microsoft.AspNetCore.Blazor;
    using Microsoft.AspNetCore.Blazor.Components;
    using Microsoft.AspNetCore.Blazor.Layouts;
    using Microsoft.AspNetCore.Blazor.Routing;
    using BlazorBricks;
    using BlazorBricks.Shared;
    [Microsoft.AspNetCore.Blazor.Layouts.LayoutAttribute(typeof(MainLayout))]
    [Microsoft.AspNetCore.Blazor.Components.RouteAttribute("/")]
    public class Index : Microsoft.AspNetCore.Blazor.Components.BlazorComponent
    {
        #pragma warning disable 1998
        protected override void BuildRenderTree(Microsoft.AspNetCore.Blazor.RenderTree.RenderTreeBuilder builder)
        {
            base.BuildRenderTree(builder);
            
    var nextRows = boardViewModel.Next.Max(n => n.Row) + 1;
    var nextColumns = boardViewModel.Next.Max(n => n.Col) + 1;
            builder.OpenElement(0, "div");
            builder.AddAttribute(1, "class", "inside-page");
            builder.AddContent(2, "\n    ");
            builder.OpenElement(3, "header");
            builder.AddContent(4, "\n        ");
            builder.OpenElement(5, "img");
            builder.AddAttribute(6, "src", "img/Title.png");
            builder.CloseElement();
            builder.AddContent(7, "\n    ");
            builder.CloseElement();
            builder.AddContent(8, "\n    ");
            builder.OpenElement(9, "div");
            builder.AddAttribute(10, "class", "HolyGrail-body");
            builder.AddContent(11, "\n        ");
            builder.OpenElement(12, "nav");
            builder.AddContent(13, "\n            ");
            builder.OpenElement(14, "div");
            builder.AddAttribute(15, "class", "stats");
            builder.AddContent(16, "\n                ");
            builder.OpenComponent<BlazorBricks.Shared.StatsInfo>(17);
            builder.AddAttribute(18, "Label", "SCORE");
            builder.AddAttribute(19, "Value", boardViewModel.Score);
            builder.CloseComponent();
            builder.AddContent(20, "\n\n                ");
            builder.OpenComponent<BlazorBricks.Shared.StatsInfo>(21);
            builder.AddAttribute(22, "Label", "HI SCORE");
            builder.AddAttribute(23, "Value", boardViewModel.HiScore);
            builder.CloseComponent();
            builder.AddContent(24, "\n\n                ");
            builder.OpenComponent<BlazorBricks.Shared.StatsInfo>(25);
            builder.AddAttribute(26, "Label", "LINES");
            builder.AddAttribute(27, "Value", boardViewModel.Lines);
            builder.CloseComponent();
            builder.AddContent(28, "\n\n                ");
            builder.OpenComponent<BlazorBricks.Shared.StatsInfo>(29);
            builder.AddAttribute(30, "Label", "LEVEL");
            builder.AddAttribute(31, "Value", boardViewModel.Level);
            builder.CloseComponent();
            builder.AddContent(32, "\n                ");
            builder.OpenElement(33, "div");
            builder.AddAttribute(34, "class", "statsLine next-container");
            builder.AddContent(35, "\n                    ");
            builder.OpenElement(36, "div");
            builder.AddContent(37, "NEXT");
            builder.CloseElement();
            builder.AddContent(38, "\n                    ");
            builder.OpenElement(39, "div");
            builder.AddContent(40, "\n                        ");
            builder.OpenElement(41, "div");
            builder.AddAttribute(42, "class", "statsLine" + " next-piece" + " piece-rows-" + nextRows + " piece-columns-" + nextColumns);
            builder.AddContent(43, "\n                            ");
            builder.OpenComponent<BlazorBricks.Shared.BricksBoard>(44);
            builder.AddAttribute(45, "Bricks", boardViewModel.Next);
            builder.CloseComponent();
            builder.AddContent(46, "\n                        ");
            builder.CloseElement();
            builder.AddContent(47, "\n                    ");
            builder.CloseElement();
            builder.AddContent(48, "\n                ");
            builder.CloseElement();
            builder.AddContent(49, "\n            ");
            builder.CloseElement();
            builder.AddContent(50, "\n        ");
            builder.CloseElement();
            builder.AddContent(51, "\n        ");
            builder.OpenElement(52, "main");
            builder.AddContent(53, "\n\n");
            if (BlazorBricks.Core.GameManager.Instance.Presenter.IsGameOver)
            {
            builder.AddContent(54, "                ");
            builder.OpenElement(55, "div");
            builder.AddContent(56, "\n                    ");
            builder.OpenElement(57, "div");
            builder.AddContent(58, "\n                        ");
            builder.OpenElement(59, "button");
            builder.AddAttribute(60, onclick(StartTickLoop));
            builder.AddContent(61, "START NEW GAME");
            builder.CloseElement();
            builder.AddContent(62, "\n                    ");
            builder.CloseElement();
            builder.AddContent(63, "\n                    ");
            builder.OpenElement(64, "br");
            builder.CloseElement();
            builder.AddContent(65, "\n                    ");
            builder.OpenElement(66, "br");
            builder.CloseElement();
            builder.AddContent(67, "\n                    ");
            builder.OpenElement(68, "br");
            builder.CloseElement();
            builder.AddContent(69, "\n                    ");
            builder.OpenElement(70, "div");
            builder.AddContent(71, "BLAZOR BRICKS");
            builder.CloseElement();
            builder.AddContent(72, "\n                    ");
            builder.OpenElement(73, "div");
            builder.AddContent(74, "Â©2018 MARCELO RICARDO DE OLIVEIRA");
            builder.CloseElement();
            builder.AddContent(75, "\n                    ");
            builder.OpenElement(76, "br");
            builder.CloseElement();
            builder.AddContent(77, "\n                    ");
            builder.OpenElement(78, "br");
            builder.CloseElement();
            builder.AddContent(79, "\n                    ");
            builder.OpenElement(80, "div");
            builder.AddContent(81, "\n                        MADE FOR CODE PROJECT ");
            builder.OpenElement(82, "br");
            builder.CloseElement();
            builder.AddContent(83, "\n                        (");
            builder.OpenElement(84, "span");
            builder.OpenElement(85, "a");
            builder.AddAttribute(86, "target", "_blank");
            builder.AddAttribute(87, "href", "http://www.codeproject.com");
            builder.AddContent(88, "http://www.codeproject.com");
            builder.CloseElement();
            builder.CloseElement();
            builder.AddContent(89, ")\n                    ");
            builder.CloseElement();
            builder.AddContent(90, "\n                    ");
            builder.OpenElement(91, "br");
            builder.CloseElement();
            builder.AddContent(92, "\n                    ");
            builder.OpenElement(93, "div");
            builder.AddContent(94, "\n                        ");
            builder.OpenElement(95, "img");
            builder.AddAttribute(96, "src", "img/Bob.png");
            builder.AddAttribute(97, "class", "bob");
            builder.CloseElement();
            builder.AddContent(98, "\n                    ");
            builder.CloseElement();
            builder.AddContent(99, "\n                ");
            builder.CloseElement();
            builder.AddContent(100, "\n");
                        }
            else
            {
            builder.AddContent(101, "                ");
            builder.OpenElement(102, "div");
            builder.AddAttribute(103, "class", "board");
            builder.AddContent(104, "\n                    ");
            builder.OpenComponent<BlazorBricks.Shared.BricksBoard>(105);
            builder.AddAttribute(106, "Bricks", boardViewModel.Bricks);
            builder.CloseComponent();
            builder.AddContent(107, "\n                ");
            builder.CloseElement();
            builder.AddContent(108, "\n");
                        }
            builder.AddContent(109, "\n        ");
            builder.CloseElement();
            builder.AddContent(110, "\n        ");
            builder.OpenElement(111, "aside");
            builder.AddContent(112, "\n            ");
            builder.OpenElement(113, "div");
            builder.AddAttribute(114, "class", "stats");
            builder.AddContent(115, "\n                ");
            builder.OpenElement(116, "div");
            builder.AddAttribute(117, "class", "statsLine next-container");
            builder.AddContent(118, "\n                    ");
            builder.OpenElement(119, "div");
            builder.AddContent(120, "NEXT");
            builder.CloseElement();
            builder.AddContent(121, "\n                    ");
            builder.OpenElement(122, "div");
            builder.AddContent(123, "\n                        ");
            builder.OpenElement(124, "div");
            builder.AddAttribute(125, "class", "statsLine" + " next-piece" + " piece-rows-" + nextRows + " piece-columns-" + nextColumns);
            builder.AddContent(126, "\n                            ");
            builder.OpenComponent<BlazorBricks.Shared.BricksBoard>(127);
            builder.AddAttribute(128, "Bricks", boardViewModel.Next);
            builder.CloseComponent();
            builder.AddContent(129, "\n                        ");
            builder.CloseElement();
            builder.AddContent(130, "\n                    ");
            builder.CloseElement();
            builder.AddContent(131, "\n                ");
            builder.CloseElement();
            builder.AddContent(132, "\n            ");
            builder.CloseElement();
            builder.AddContent(133, "\n        ");
            builder.CloseElement();
            builder.AddContent(134, "\n    ");
            builder.CloseElement();
            builder.AddContent(135, "\n    ");
            builder.OpenElement(136, "footer");
            builder.AddContent(137, "\n        ");
            builder.OpenElement(138, "img");
            builder.AddAttribute(139, "class", "wa-logo");
            builder.AddAttribute(140, "src", "/img/WebAssembly.svg");
            builder.CloseElement();
            builder.AddContent(141, "\n    ");
            builder.CloseElement();
            builder.AddContent(142, "\n");
            builder.CloseElement();
            builder.AddContent(143, "\n");
            builder.OpenElement(144, "div");
            builder.AddAttribute(145, "class", "as-console-wrapper");
            builder.OpenElement(146, "div");
            builder.AddAttribute(147, "class", "as-console");
            builder.CloseElement();
            builder.CloseElement();
            builder.AddContent(148, "\n\n\n");
            builder.OpenElement(149, "script");
            builder.AddContent(150, @"

    const assemblyName = 'BlazorBricks';
    const namespace = 'BlazorBricks';
    const typeName = 'OnKeyUp';
    const methodName = 'Handler';

    const onkeyupMethod = Blazor.platform.findMethod(
        assemblyName,
        namespace,
        typeName,
        methodName
    );

    document.onkeyup = function (evt) {
        evt = evt || window.event;
        const keyCode = Blazor.platform.toDotNetString(evt.keyCode.toString());
        Blazor.platform.callMethod(onkeyupMethod, null, [keyCode]);

    };

    function onKeyUp(element, evt) {
        const char = Blazor.platform.toDotNetString(evt.key)
        Blazor.platform.callMethod(onkeyupMethod, null, [char]);
    }
");
            builder.CloseElement();
            builder.AddContent(151, "\n");
        }
        #pragma warning restore 1998
        
    BlazorBricks.Core.BoardViewModel boardViewModel;

    protected override async Task OnInitAsync()
    {
        OnKeyUp.Action = async value =>
        {
            ConsoleKey consoleKey = (ConsoleKey)Enum.Parse(typeof(ConsoleKey), value);

            var presenter = BlazorBricks.Core.GameManager.Instance.Presenter;

            switch (consoleKey)
            {
                case ConsoleKey.LeftArrow:
                    presenter.MoveLeft();
                    break;
                case ConsoleKey.RightArrow:
                    presenter.MoveRight();
                    break;
                case ConsoleKey.UpArrow:
                    presenter.Rotate90();
                    break;
                case ConsoleKey.DownArrow:
                    presenter.MoveDown();
                    break;
                default:
                    break;
            }
            this.StateHasChanged();
        };

        boardViewModel = BlazorBricks.Core.GameManager.Instance.CurrentBoard;

        Object thisLock = new Object();
        BlazorBricks.Core.GameManager.Instance.Presenter.Updated
        += (obj, e) =>
        {
            lock (thisLock)
            {
                boardViewModel = BlazorBricks.Core.GameManager.Instance.CurrentBoard;
                this.StateHasChanged();
            };
        };

        InitializeBoard();
    }

    void InitializeBoard()
    {
        BlazorBricks.Core.GameManager.Instance.Presenter.InitializeBoard();
        boardViewModel = BlazorBricks.Core.GameManager.Instance.CurrentBoard;

        this.StateHasChanged();
    }

    public void StartTickLoop()
    {
        BlazorBricks.Core.GameManager.Instance.Presenter.StartTickLoop();
    }
    }
}
#pragma warning restore 1591
